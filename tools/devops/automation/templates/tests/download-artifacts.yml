# common steps to download the artifacts from the test results.
parameters:

- name: testPrefix
  type: string 
  default: 'ios' # default context, since we started dealing with iOS devices. 

- name: downloadTestSummary
  type: boolean
  default: true

- name: downloadHtmlReport
  type: boolean
  default: true

- name: runTests
  type: boolean
  default: true

- name: testConfigurations
  type: object

steps:

- pwsh: |
    if (Test-Path "$Env:SYSTEM_DEFAULTWORKINGDIRECTORY/Reports" -PathType Container) {
      Remove-Item -Path "$Env:SYSTEM_DEFAULTWORKINGDIRECTORY/Reports" -Force -Recurse
    }
  displayName: "Remove artifacts"
  condition: always()

- pwsh:
    Get-ChildItem $(System.DefaultWorkingDirectory)/Reports -Recurse
  displayName: "Debug downloaded artifacts."
